{"componentChunkName":"component---src-templates-post-template-post-template-tsx","path":"/posts/lesson-learned-from-a-sad-story-of-bumblebee","result":{"data":{"markdownRemark":{"id":"4c4eae38-f450-5e5d-ad41-c9ad7980b055","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f8875f76a7ee86836f806594dd766736/4b190/bug-bumblebee.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAQD/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAYk2yxsyf//EABsQAQABBQEAAAAAAAAAAAAAAAERAAIDEBI0/9oACAEBAAEFAiA4GydY/PX/xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPwEn/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGxAAAQQDAAAAAAAAAAAAAAAAEAABAxIxUZL/2gAIAQEABj8Cw3StoyD/xAAcEAEAAQQDAAAAAAAAAAAAAAABEQAQITFRYfD/2gAIAQEAAT8hxCjzCptOQzDT0LN2ei3/2gAMAwEAAgADAAAAEJDf/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAEDAQE/EKa//8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQIBAT8QZ//EABoQAAMAAwEAAAAAAAAAAAAAAAABESExcaH/2gAIAQEAAT8QRlsXBHMF81QUSa5vEIueA9Mial1Q2f/Z'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/f8875f76a7ee86836f806594dd766736/8ac56/bug-bumblebee.webp 240w,\n/static/f8875f76a7ee86836f806594dd766736/d3be9/bug-bumblebee.webp 480w,\n/static/f8875f76a7ee86836f806594dd766736/d00b9/bug-bumblebee.webp 800w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/f8875f76a7ee86836f806594dd766736/09b79/bug-bumblebee.jpg 240w,\n/static/f8875f76a7ee86836f806594dd766736/7cc5e/bug-bumblebee.jpg 480w,\n/static/f8875f76a7ee86836f806594dd766736/4b190/bug-bumblebee.jpg 800w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/f8875f76a7ee86836f806594dd766736/4b190/bug-bumblebee.jpg\"\n            alt=\"bug-bumblebee\"\n            title=\"bug-bumblebee\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>When you fail to check a variable, it may cause a whole system failure? This sad story of the software Bumblebee will tell you: <strong>YES</strong>!</p>\n<p>Bumblebee is an open source project, which names after the Bumblebee in Transformers. It’s a project aiming to support NVIDIA Optimus technology under Linux. It works on Optimus Laptops without a graphical multiplexer. Optimus comes from NVIDIA, it’s a technology that allows an integrated GPU and discrete NVIDIA GPU to be built into and accessed by a laptop.</p>\n<p>It’s a memorable incident known as the “Bumblebee” commit this May. The essence of the story lies in the aftermath of the commit, where the user describes having written commit messages along the lines of “GIANT BUG… causing /usr to be deleted… so sorry…“. The root cause is a missing space character in the installation script, which leads to a <code class=\"language-text\">rm -rf /usr</code> command. Which makes things worse, is that the bug lies in an installation shell script, which means in most cases, it executed by <em>root</em>.</p>\n<p>The fix commit of this bug looks like,</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">diff --git a/install.sh b/install.sh\nindex 7d10ece..b1c571b 100755\n<span class=\"token coord\">--- a/install.sh</span>\n<span class=\"token coord\">+++ b/install.sh</span>\n<span class=\"token coord\">@@ -37,7 +37,7 @@</span>\n<span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span>#    You should have received a copy of the GNU General Public License\n<span class=\"token prefix unchanged\"> </span>#    along with bumblebee.  If not, see &lt;http://www.gnu.org/licenses/>.\n<span class=\"token prefix unchanged\"> </span>#\n</span><span class=\"token deleted-sign deleted\"><span class=\"token prefix deleted\">-</span>BUMBLEBEEVERSION=1.4.31\n</span><span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span>BUMBLEBEEVERSION=1.4.32\n</span>\n\n<span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span>ROOT_UID=0\n</span>@@ -348,7 +348,7 @@ case \"$DISTRO\" in\n<span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span>  ln -s /usr/lib/mesa/ld.so.conf /etc/alternatives/gl_conf\n<span class=\"token prefix unchanged\"> </span>  rm -rf /etc/alternatives/xorg_extra_modules\n<span class=\"token prefix unchanged\"> </span>  rm -rf /etc/alternatives/xorg_extra_modules-bumblebee\n</span><span class=\"token deleted-sign deleted\"><span class=\"token prefix deleted\">-</span>  rm -rf /usr /lib/nvidia-current/xorg/xorg\n</span><span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span>  rm -rf /usr/lib/nvidia-current/xorg/xorg\n</span><span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span>  ln -s /usr/lib/nvidia-current/xorg /etc/alternatives/xorg_extra_modules-bumblebee\n<span class=\"token prefix unchanged\"> </span>  ldconfig\n<span class=\"token prefix unchanged\"> </span> ;;</span></code></pre></div>\n<p>However, the most exciting thing is not this bug, but the <a href=\"https://github.com/MrMEEE/bumblebee/commit/a047be85247755cdbe0acce6#diff-1\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">code review comments</a> about this bug from programmers around the world, which is really very joyful. Please watch closely!</p>\n<p>The overall tone of the discussion reflects a mix of humor and understanding, with developers sharing their own experiences and lessons learned from unintentional file deletions. It emphasizes the importance of caution, code review, and adherence to best practices in software development to prevent potentially catastrophic mistakes.</p>","fields":{"slug":"/posts/2011-06-20---Lesson-Learned-from-a-Sad-Story-of-Bumblebee//posts/lesson-learned-from-a-sad-story-of-bumblebee","tagSlugs":["/tag/linux-system/","/tag/shell/"]},"frontmatter":{"date":"2011-06-20T21:00:00.000+0800","description":"a famous shell script bug from software Bumblebee and lesson learned.","tags":["Linux System","Shell"],"title":"Lesson Learned from a Sad Story of Bumblebee","socialImage":{"publicURL":"/static/f8875f76a7ee86836f806594dd766736/bug-bumblebee.jpg"}}}},"pageContext":{"slug":"/posts/2011-06-20---Lesson-Learned-from-a-Sad-Story-of-Bumblebee//posts/lesson-learned-from-a-sad-story-of-bumblebee"}},"staticQueryHashes":["251939775","2764776372","401334301"]}