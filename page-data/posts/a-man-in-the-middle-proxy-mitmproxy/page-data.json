{"componentChunkName":"component---src-templates-post-template-post-template-tsx","path":"/posts/a-man-in-the-middle-proxy-mitmproxy/","result":{"data":{"markdownRemark":{"id":"d39b466e-6307-5725-a31c-15831ba67cfe","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c351a970060109c0d980249a21cf3666/4b190/mitmproxy.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAActaKTKB/8QAFxABAQEBAAAAAAAAAAAAAAAAABEQQf/aAAgBAQABBQLmREf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAZEAACAwEAAAAAAAAAAAAAAAAAARFRYSH/2gAIAQEAAT8hTsObO6R0iJbZ/9oADAMBAAIAAwAAABAAz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB0QAQABAwUAAAAAAAAAAAAAAAEAETFRIUGRobH/2gAIAQEAAT8QRAq2YtnaLnymgFbIgXYor4T/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/c351a970060109c0d980249a21cf3666/8ac56/mitmproxy.webp 240w,\n/static/c351a970060109c0d980249a21cf3666/d3be9/mitmproxy.webp 480w,\n/static/c351a970060109c0d980249a21cf3666/d00b9/mitmproxy.webp 800w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/c351a970060109c0d980249a21cf3666/09b79/mitmproxy.jpg 240w,\n/static/c351a970060109c0d980249a21cf3666/7cc5e/mitmproxy.jpg 480w,\n/static/c351a970060109c0d980249a21cf3666/4b190/mitmproxy.jpg 800w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/c351a970060109c0d980249a21cf3666/4b190/mitmproxy.jpg\"\n            alt=\"mitmproxy\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>In cryptography and computer security, a <strong>man-in-the-middle (MITM)</strong> attack, or on-path attack, is a cyberattack where the attacker secretly relays and possibly alters the communications between two parties who believe that they are directly communicating with each other, where in actuality the attacker has inserted themselves between the two user parties.</p>\n<p>Alternatively, we could also use the <strong>MITM</strong> technology to control the data stream over the network. The <a href=\"https://mitmproxy.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">mitmproxy</a> is a great tool for this purpose. It looks like a swiss-army knife for debugging, testing, privacy measurements, and penetration testing. It can be used to intercept, inspect, modify, and replay web traffic such as HTTP/1, HTTP/2, HTTP/3, WebSockets, or any other SSL/TLS-protected protocols. You can prettify and decode a variety of message types ranging from HTML to Protobuf, intercept specific messages on the fly, modify them before they reach their destination, and replay them to a client or server later on.</p>\n<h2 id=\"scenarios\" style=\"position:relative;\"><a href=\"#scenarios\" aria-label=\"scenarios permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Scenarios</h2>\n<p>The <strong>mitmproxy</strong> supports several kinds of proxy modes, including <strong>transparent proxy</strong>, <strong>reverse proxy</strong>, and <strong>upstream proxy</strong>. It can be used as a <strong>command-line tool</strong>, <strong>Python library</strong>, or <strong>web interface</strong>. It is also extensible and can be scripted in Python.</p>\n<ul>\n<li><strong>regular</strong>: The default mode. Configure your client(s) to use an HTTP(S) proxy.</li>\n<li><strong>local capture</strong>: Capture applications on the same device.</li>\n<li><strong>wireguard</strong>: Capture external devices or individual Android apps.</li>\n<li><strong>reverse</strong>: Put mitmproxy in front of a server.</li>\n<li><strong>transparent</strong>: Capture traffic with custom network routes.</li>\n<li><strong>tun interface</strong>: Create a virtual network device to capture traffic.</li>\n<li><strong>upstream</strong>: Chain two HTTP(S) proxies.</li>\n<li><strong>socks</strong>: Run a SOCKS5 proxy server.</li>\n<li><strong>dns</strong>: Run a scriptable DNS server.</li>\n</ul>\n<h2 id=\"security\" style=\"position:relative;\"><a href=\"#security\" aria-label=\"security permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Security</h2>\n<p>To trust CA certificates, you need to install the mitmproxy CA certificate on your device. This is necessary for HTTPS interception. The CA certificate is used to sign the certificates that mitmproxy generates for each intercepted HTTPS connection. By installing the CA certificate, you tell your device to trust these generated certificates, allowing mitmpr\n<a href=\"https://docs.mitmproxy.org/stable/concepts-certificates/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://docs.mitmproxy.org/stable/concepts-certificates/</a></p>\n<p>e.g. to enable a Java Application running on MacOS</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\"><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">)</span><span class=\"token comment\"># security add-trusted-cert -d -p ssl -p basic -k /Library/Keychains/System.keychain ~/.mitmproxy/mitmproxy-ca-cert.pem</span>\n<span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">)</span><span class=\"token comment\"># keytool -importcert -alias mitmproxy -storepass changeit -keystore $JAVA_HOME/lib/security/cacerts -trustcacerts -file ~/.mitmproxy/mitmproxy-ca-cert.pem</span></code></pre></div>","fields":{"slug":"/posts/2025-03-07---A-Man-in-the-Middle-Proxy-\"mitmproxy\"//posts/a-man-in-the-middle-proxy-mitmproxy","tagSlugs":["/tag/linux-system/","/tag/proxy/"]},"frontmatter":{"date":"2025-03-07T16:00:00.000Z","description":"introduction of the man-in-the-middle attack and proxy.","tags":["Linux System","Proxy"],"title":"A Man-in-the-Middle Proxy \"mitmproxy\"","socialImage":{"publicURL":"/static/c351a970060109c0d980249a21cf3666/mitmproxy.jpg"}}}},"pageContext":{"slug":"/posts/2025-03-07---A-Man-in-the-Middle-Proxy-\"mitmproxy\"//posts/a-man-in-the-middle-proxy-mitmproxy"}},"staticQueryHashes":["251939775","288581551","401334301"],"slicesMap":{}}